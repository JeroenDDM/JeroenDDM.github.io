/*
* purecloud-client-app-sdk
* @copyright Copyright (C) 2024 Genesys Telecommunications Laboratories, Inc.}
* @license MIT
*
* This software comprises other FOSS software.
* Attribution and license information can be found at https://github.com/MyPureCloud/client-app-sdk/blob/master/README.md
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).purecloud=t.purecloud||{},t.purecloud.apps=t.purecloud.apps||{},t.purecloud.apps.ClientApp=e())}(this,(function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t};var r=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var s=new RegExp("(%[a-f0-9]{2})|([^%]+?)","gi"),c=new RegExp("(%[a-f0-9]{2})+","gi");function u(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],u(n),u(r))}function l(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(s)||[],n=1;n<e.length;n++)e=(t=u(e,n).join("")).match(s)||[];return t}}var p=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=c.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=l(n[0]);r!==n[0]&&(e[n[0]]=r)}n=c.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),i=0;i<o.length;i++){var a=o[i];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}},f=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]},d=function(t,e){for(var n={},r=Object.keys(t),o=Array.isArray(e),i=0;i<r.length;i++){var a=r[i],s=t[a];(o?-1!==e.indexOf(a):e(a,s,t))&&(n[a]=s)}return n},h=a((function(t,e){const n=Symbol("encodeFragmentIdentifier");function r(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase()):encodeURIComponent(t):t}function i(t,e){return e.decode?p(t):t}function a(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function s(t){const e=(t=a(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function c(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function u(t,e){r((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.includes(t.arrayFormatSeparator),a="string"==typeof n&&!o&&i(n,t).includes(t.arrayFormatSeparator);n=a?i(n,t):n;const s=o||a?n.split(t.arrayFormatSeparator).map(e=>i(e,t)):null===n?n:i(n,t);r[e]=s};case"bracket-separator":return(e,n,r)=>{const o=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!o)return void(r[e]=n?i(n,t):n);const a=null===n?[]:n.split(t.arrayFormatSeparator).map(e=>i(e,t));void 0!==r[e]?r[e]=[].concat(r[e],a):r[e]=a};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),o=Object.create(null);if("string"!=typeof t)return o;if(!(t=t.trim().replace(/^[?#&]/,"")))return o;for(const r of t.split("&")){if(""===r)continue;let[t,a]=f(e.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:i(a,e),n(i(t,e),a,o)}for(const t of Object.keys(o)){const n=o[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=c(n[t],e);else o[t]=c(n,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((t,e)=>{const n=o[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(n):t[e]=n,t},Object.create(null))}e.extract=s,e.parse=u,e.stringify=(t,e)=>{if(!t)return"";r((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],i=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[o(e,t),"[",i,"]"].join("")]:[...n,[o(e,t),"[",o(i,t),"]=",o(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[o(e,t),"[]"].join("")]:[...n,[o(e,t),"[]=",o(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[o(e,t),":list="].join("")]:[...n,[o(e,t),":list=",o(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[o(n,t),e,o(i,t)].join("")]:[[r,o(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,o(e,t)]:[...n,[o(e,t),"=",o(r,t)].join("")]}}(e),a={};for(const e of Object.keys(t))n(e)||(a[e]=t[e]);const s=Object.keys(a);return!1!==e.sort&&s.sort(e.sort),s.map(n=>{const r=t[n];return void 0===r?"":null===r?o(n,e):Array.isArray(r)?0===r.length&&"bracket-separator"===e.arrayFormat?o(n,e)+"[]":r.reduce(i(n),[]).join("&"):o(n,e)+"="+o(r,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=f(t,"#");return Object.assign({url:n.split("?")[0]||"",query:u(s(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:i(r,e)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[n]:!0},r);const i=a(t.url).split("?")[0]||"",s=e.extract(t.url),c=e.parse(s,{sort:!1}),u=Object.assign(c,t.query);let l=e.stringify(u,r);l&&(l="?"+l);let p=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(p="#"+(r[n]?o(t.fragmentIdentifier,r):t.fragmentIdentifier)),`${i}${l}${p}`},e.pick=(t,r,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[n]:!1},o);const{url:i,query:a,fragmentIdentifier:s}=e.parseUrl(t,o);return e.stringifyUrl({url:i,query:d(a,r),fragmentIdentifier:s},o)},e.exclude=(t,n,r)=>{const o=Array.isArray(n)?t=>!n.includes(t):(t,e)=>!n(t,e);return e.pick(t,o,r)}}));var y=function(t){if(Array.isArray(t))return t};var m=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}};var v=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var g=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}};var b=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var w=function(t,e){return y(t)||m(t,e)||g(t,e)||b()};var k=function(t){if(Array.isArray(t))return v(t)};var O=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var E=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var P=function(t){return k(t)||O(t)||g(t)||E()},j=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},D=Object.prototype.hasOwnProperty;function R(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function x(t){try{return encodeURIComponent(t)}catch(t){return null}}var A={stringify:function(t,e){e=e||"";var n,r,o=[];for(r in"string"!=typeof e&&(e="?"),t)if(D.call(t,r)){if((n=t[r])||null!=n&&!isNaN(n)||(n=""),r=x(r),n=x(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?e+o.join("&"):""},parse:function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,r={};e=n.exec(t);){var o=R(e[1]),i=R(e[2]);null===o||null===i||o in r||(r[o]=i)}return r}},S=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,C=/[\n\r\t]/g,N=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,_=/:\d+$/,L=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,I=/^[a-zA-Z]:/;function M(t){return(t||"").toString().replace(S,"")}var T=[["#","hash"],["?","query"],function(t,e){return H(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],F={hash:1,query:1};function U(t){var e,n=("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(t=t||n);if("blob:"===t.protocol)r=new $(unescape(t.pathname),{});else if("string"===i)for(e in r=new $(t,{}),F)delete r[e];else if("object"===i){for(e in t)e in F||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=N.test(t.href))}return r}function H(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function q(t,e){t=(t=M(t)).replace(C,""),e=e||{};var n,r=L.exec(t),o=r[1]?r[1].toLowerCase():"",i=!!r[2],a=!!r[3],s=0;return i?a?(n=r[2]+r[3]+r[4],s=r[2].length+r[3].length):(n=r[2]+r[4],s=r[2].length):a?(n=r[3]+r[4],s=r[3].length):n=r[4],"file:"===o?s>=2&&(n=n.slice(2)):H(o)?n=r[4]:o?i&&(n=n.slice(2)):s>=2&&H(e.protocol)&&(n=r[4]),{protocol:o,slashes:i||H(o),slashesCount:s,rest:n}}function $(t,e,n){if(t=(t=M(t)).replace(C,""),!(this instanceof $))return new $(t,e,n);var r,o,i,a,s,c,u=T.slice(),l=typeof e,p=this,f=0;for("object"!==l&&"string"!==l&&(n=e,e=null),n&&"function"!=typeof n&&(n=A.parse),r=!(o=q(t||"",e=U(e))).protocol&&!o.slashes,p.slashes=o.slashes||r&&e.slashes,p.protocol=o.protocol||e.protocol||"",t=o.rest,("file:"===o.protocol&&(2!==o.slashesCount||I.test(t))||!o.slashes&&(o.protocol||o.slashesCount<2||!H(p.protocol)))&&(u[3]=[/(.*)/,"pathname"]);f<u.length;f++)"function"!=typeof(a=u[f])?(i=a[0],c=a[1],i!=i?p[c]=t:"string"==typeof i?~(s="@"===i?t.lastIndexOf(i):t.indexOf(i))&&("number"==typeof a[2]?(p[c]=t.slice(0,s),t=t.slice(s+a[2])):(p[c]=t.slice(s),t=t.slice(0,s))):(s=i.exec(t))&&(p[c]=s[1],t=t.slice(0,s.index)),p[c]=p[c]||r&&a[3]&&e[c]||"",a[4]&&(p[c]=p[c].toLowerCase())):t=a(t,p);n&&(p.query=n(p.query)),r&&e.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==e.pathname)&&(p.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(p.pathname,e.pathname)),"/"!==p.pathname.charAt(0)&&H(p.protocol)&&(p.pathname="/"+p.pathname),j(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(~(s=p.auth.indexOf(":"))?(p.username=p.auth.slice(0,s),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=p.auth.slice(s+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(p.auth)),p.auth=p.password?p.username+":"+p.password:p.username),p.origin="file:"!==p.protocol&&H(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString()}$.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||A.parse)(e)),r[t]=e;break;case"port":r[t]=e,j(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,_.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";r[t]=e.charAt(0)!==o?o+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var i=e.indexOf(":");~i?(r.username=e.slice(0,i),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(i+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var a=0;a<T.length;a++){var s=T[a];s[4]&&(r[s[1]]=r[s[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&H(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=A.stringify);var e,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(n.protocol&&n.slashes||H(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):"file:"!==n.protocol&&H(n.protocol)&&!r&&"/"!==n.pathname&&(i+="@"),(":"===r[r.length-1]||_.test(n.hostname)&&!n.port)&&(r+=":"),i+=r+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(i+=n.hash),i}},$.extractProtocol=q,$.location=U,$.trimLeft=M,$.qs=A;var z=$,Q=a((function(t,e){function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(z),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function a(t,e){if(!t)throw new Error(e)}function s(t){a("string"==typeof t,"url is not a string");var e=r.default(t,{});return a(e.protocol&&e.hostname,"invalid url: '".concat(t,"', unable to parse hostname")),e}function c(t){a(!!t&&"object"==typeof t,"Provided filters must be an object");var e=t;void 0!==e.env&&(a(e.env instanceof Array,"filters.env must be an array"),a(e.env.every((function(t){return l.indexOf(t)>=0})),"'".concat(e.env,"' - filters.env must be an array containing only: ").concat(l.join(",")))),void 0!==e.status&&(a(e.status instanceof Array,"filters.status must be an array"),a(e.status.every((function(t){return p.indexOf(t)>=0})),"'".concat(e.status,"' - filters.status must be an array containing only: ").concat(p.join(","))))}var u=[{name:"fedramp-use2-core",env:"fedramp",region:"us-east-2",status:"stable",publicDomainName:"use2.us-gov-pure.cloud",publicDomainAliases:[]},{name:"prod",env:"prod",region:"us-east-1",status:"stable",publicDomainName:"mypurecloud.com",publicDomainAliases:[]},{name:"prod-apne1",env:"prod",region:"ap-northeast-1",status:"stable",publicDomainName:"mypurecloud.jp",publicDomainAliases:[]},{name:"prod-apne2",env:"prod",region:"ap-northeast-2",status:"stable",publicDomainName:"apne2.pure.cloud",publicDomainAliases:[]},{name:"prod-apne3",env:"prod",region:"ap-northeast-3",status:"stable",publicDomainName:"apne3.pure.cloud",publicDomainAliases:[]},{name:"prod-aps1",env:"prod",region:"ap-south-1",status:"stable",publicDomainName:"aps1.pure.cloud",publicDomainAliases:[]},{name:"prod-apse2",env:"prod",region:"ap-southeast-2",status:"stable",publicDomainName:"mypurecloud.com.au",publicDomainAliases:[]},{name:"prod-cac1",env:"prod",region:"ca-central-1",status:"stable",publicDomainName:"cac1.pure.cloud",publicDomainAliases:[]},{name:"prod-euc1",env:"prod",region:"eu-central-1",status:"stable",publicDomainName:"mypurecloud.de",publicDomainAliases:[]},{name:"prod-euc2",env:"prod",region:"eu-central-2",status:"stable",publicDomainName:"euc2.pure.cloud",publicDomainAliases:[]},{name:"prod-euw1",env:"prod",region:"eu-west-1",status:"stable",publicDomainName:"mypurecloud.ie",publicDomainAliases:[]},{name:"prod-euw2",env:"prod",region:"eu-west-2",status:"stable",publicDomainName:"euw2.pure.cloud",publicDomainAliases:[]},{name:"prod-mec1",env:"prod",region:"me-central-1",status:"stable",publicDomainName:"mec1.pure.cloud",publicDomainAliases:[]},{name:"prod-sae1",env:"prod",region:"sa-east-1",status:"stable",publicDomainName:"sae1.pure.cloud",publicDomainAliases:[]},{name:"prod-usw2",env:"prod",region:"us-west-2",status:"stable",publicDomainName:"usw2.pure.cloud",publicDomainAliases:[]}],l=["dev","test","prod","fedramp"],p=["alpha","beta","stable","archived"],f=["localhost","127.0.0.1"],d={env:["prod","fedramp"],status:["stable"]},h={},y=function(t){return function(e){return t===e||(n=t,r=".".concat(e),n.slice(n.length-r.length)===r);var n,r}},m=function(t){void 0===t&&(t=d),c(t);var e=t.env,n=t.status;return u.filter((function(t){return void 0===e||e.indexOf(t.env)>=0})).filter((function(t){return void 0===n||n.indexOf(t.status)>=0}))},v=function(t,e){var n=s(t).hostname;return m(e).find((function(t){return i([t.publicDomainName],t.publicDomainAliases,!0).filter((function(t){return!!t})).some(y(n))}))},g=function(t,e){void 0===t&&(t=window.location.href),void 0===e&&(e=h),c(e);var n=s(t).hostname,r=v(t,e);if(r)return o(o({},r),{local:!1,currentDomainName:i([r.publicDomainName],r.publicDomainAliases,!0).filter((function(t){return!!t})).find(y(n))})},b=function(t){return void 0===t&&(t=f),function(e,n){void 0===e&&(e=window.location.href),void 0===n&&(n=h),c(n),function(t,e){void 0===e&&(e="value"),a(t instanceof Array,"".concat(e," must be an array of strings"));for(var n=0,r=t;n<r.length;n++){a("string"==typeof r[n],"Each item in ".concat(e," must be a string"))}}(t,"localHostnames");var r=s(e),i=r.hostname,u=r.pathname;if(t.indexOf(i)>=0){var l=u.split("/")[1],p=m(n).find((function(t){return t.name===l}));if(!p)return;return o(o({},p),{local:!0,currentDomainName:p.publicDomainName})}}};e.ENVS=l,e.STATUSES=p,e.getEnvironments=m,e.isKnown=function(t,e){return!!v(t,e)},e.parse=v,e.parseDeployedRuntime=g,e.parseRuntime=function(t,e){return void 0===t&&(t=window.location.href),void 0===e&&(e=h),b()(t,e)||g(t,e)},e.parseRuntimeFromLocalPath=b})),B=function(t){return{pcEnvTld:t,pcAppOrigin:"https://apps.".concat(t)}},G=i(Q).getEnvironments({env:["prod","fedramp"],status:["beta","stable"]}),W=G.reduce((function(t,e){return t.push(e.publicDomainName),t.push.apply(t,P(e.publicDomainAliases)),t}),[]).concat([]),V=w(G.filter((function(t){return"us-east-1"===t.region})),1)[0],J=B(V.publicDomainName);function Z(t,e){return new Set([].concat(P(e),[]).map((function(t){return t.name}))).has(t)}function K(t,e,n){var r=[].concat(P(n),[]).find((function(e){var n,r=e.publicDomainName,o=e.publicDomainAliases;return[r].concat(P(o)).filter((function(t){return!!t})).some((n=t.hostname,function(t){return n===t||n.endsWith(".".concat(t))}))}));return r&&r.name===e?{pcEnvTld:r.publicDomainName,pcAppOrigin:t.origin}:null}var X=a((function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e})),Y=a((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})),tt=a((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e}));var et=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t},nt=a((function(t){function e(n,r,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,n){var r=et(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},e(n,r,o||n)}t.exports=e})),rt=a((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var ot=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)};var it=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var at=function(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?it(t):e},st={postMsgToPc:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.parent,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:window.console,a=!(!r||"object"!==Y(r)||!o||"object"!==Y(o)),s=a&&o!==r,c=!(!o||"function"!=typeof o.postMessage);if(a&&s&&c)o.postMessage(t,e,n);else{var u="PureCloud Communication Failed.  ";if(u+=a?s?"postMessage not supported in this browser.":"Not running within an iframe.":"Not running within a browser.",!i)throw new Error(u);i.error(u)}}},ct=function(){function e(){var n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),r(this,"_targetPcOrigin",void 0),r(this,"_protocolDetails",void 0),r(this,"_msgListenerCfgs",{}),r(this,"_msgHandler",(function(t){return n._onMsg(t)})),r(this,"_commsUtils",st),r(this,"_myWindow",window),r(this,"_myParent",window?window.parent:void 0),this._targetPcOrigin=o.targetPcOrigin||"*",this._protocolDetails={name:o.protocol||"purecloud-client-apps",agentName:o.protocolAgentName||"purecloud-client-app-sdk",agentVersion:o.protocolAgentVersion||"2.6.6"}}return n(e,[{key:"sendMsgToPc",value:function(t,e){this._commsUtils.postMsgToPc(this.buildSdkMsgPayload(t,e),this._targetPcOrigin)}},{key:"buildSdkMsgPayload",value:function(t,e){var n={};return e&&"object"===Y(e)&&(n=JSON.parse(JSON.stringify(e))),n.action=t,n.protocol=this._protocolDetails.name,n.protocolAgentName=this._protocolDetails.agentName,n.protocolAgentVersion=this._protocolDetails.agentVersion,n}},{key:"addMsgListener",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||"string"!=typeof t||0===t.trim().length)throw new Error("Invalid eventType provided to addMsgListener");if(!e||"function"!=typeof e)throw new Error("Invalid listener provided to addMsgListener");var o={listener:e,options:this._buildNormalizedListenerOptions(r)},i=!1,a=this._msgListenerCfgs[t];a?a.length>0&&a.forEach((function(t){n._isDuplicateListenerCfg(t,o)&&(i=!0)})):(a=[],this._msgListenerCfgs[t]=a),i||(a.push(o),1===this._getListenerCount()&&this._subscribeToMsgs())}},{key:"removeMsgListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||"string"!=typeof t||0===t.trim().length)throw new Error("Invalid eventType provided to removeMsgListener");if(!e||"function"!=typeof e)throw new Error("Invalid listener provided to removeMsgListener");var r={listener:e,options:this._buildNormalizedListenerOptions(n)},o=this._msgListenerCfgs[t];if(o){for(var i=-1,a=0;a<o.length;a++)if(this._isDuplicateListenerCfg(o[a],r)){i=a;break}i>=0&&(o.splice(i,1),0===this._getListenerCount()&&this._unsubscribeFromMsgs())}}},{key:"_getListenerCount",value:function(){var t=this,e=0;return Object.keys(this._msgListenerCfgs).forEach((function(n){var r=t._msgListenerCfgs[n];r&&(e+=r.length)})),e}},{key:"_subscribeToMsgs",value:function(){this._myWindow.addEventListener("message",this._msgHandler)}},{key:"_unsubscribeFromMsgs",value:function(){this._myWindow.removeEventListener("message",this._msgHandler)}},{key:"_onMsg",value:function(t){var e=this;if(t&&t.source&&t.origin&&t.source===this._myParent&&t.origin===this._targetPcOrigin&&t.data&&"object"===Y(t.data)&&!Array.isArray(t.data)){var n=t.data.purecloudEventType;if(n&&"string"==typeof n&&n.trim()){var r=this._msgListenerCfgs[n];if(r&&r.length>0){var o=[];r.forEach((function(e){if(!e.options.msgPayloadFilter||e.options.msgPayloadFilter(t.data)){var n=JSON.parse(JSON.stringify(t.data));delete n.protocol,e.listener(n),e.options.once&&o.push(e)}})),o.length>0&&o.forEach((function(t){e.removeMsgListener(n,t.listener,t.options)}))}}}}},{key:"_buildNormalizedListenerOptions",value:function(t){var e={msgPayloadFilter:null,once:!1};if(null==t)return e;if("object"!==Y(t)||Array.isArray(t))throw new Error("Invalid options provided");var n=t.msgPayloadFilter;if(null!=n&&"function"!=typeof n)throw new Error("options.msgPayloadFilter must be a function if specified");if(e.msgPayloadFilter=n||null,null!==t.once&&void 0!==t.once&&"boolean"!=typeof t.once)throw new Error("options.once must be a boolean if specified");return e.once=t.once||!1,e}},{key:"_isDuplicateListenerCfg",value:function(t,e){return t.listener===e.listener&&t.options.once===e.options.once&&t.options.msgPayloadFilter===e.options.msgPayloadFilter}}]),e}();function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var lt=["error","info","success"],pt=["id","markdownMessage","timeout","showCloseButton"],ft={type:"info",timeout:7,showCloseButton:!0,markdownMessage:!0},dt=function(e){ot(o,e);var r=ut(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showToastPopup",value:function(t,e,n){var r,i,a,s=n||ft,c={title:t,message:e,type:"info"};if(s&&"object"===Y(s)){if(s.type&&"string"==typeof s.type){var u=s.type.trim().toLowerCase();a=u,lt.indexOf(a)>-1&&(c.type=u)}var l=(r=s,i={},pt.forEach((function(t){i[t]=r[t]})),i);X(c,l)}nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showToast",c)}},{key:"setAttentionCount",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"setAttentionCount",{count:t})}}]),o}(ct);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var yt=function(t){return function(e){return"object"===Y(e)&&e.hook===t}},mt=yt("bootstrap"),vt=yt("focus"),gt=yt("blur"),bt=yt("stop"),wt=function(e){ot(o,e);var r=ht(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"addBootstrapListener",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.addMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:mt})}},{key:"bootstrapped",value:function(){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"bootstrapped")}},{key:"removeBootstrapListener",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:mt})}},{key:"addFocusListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:vt})}},{key:"removeFocusListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removeMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:vt})}},{key:"addBlurListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:gt})}},{key:"removeBlurListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removeMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:gt})}},{key:"addStopListener",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.addMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:bt})}},{key:"stopped",value:function(){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"stopped")}},{key:"removeStopListener",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeMsgListener("appLifecycleHook",t,{once:e,msgPayloadFilter:bt})}}]),o}(ct);function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var Ot=function(e){ot(o,e);var r=kt(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showHelp",value:function(){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showHelp")}},{key:"showResourceCenterArtifact",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showResourceCenterArtifact",{resourceCenterRelPath:t})}},{key:"hideHelp",value:function(){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"hideHelp")}},{key:"openWindow",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"openWindow",{targetUrl:t})}}]),o}(ct);function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var Pt=function(e){ot(o,e);var r=Et(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showProfile",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showProfile",{profileId:t})}}]),o}(ct);function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var Dt=function(e){ot(o,e);var r=jt(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showUser",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showProfile",{profileId:t})}},{key:"showGroup",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showGroup",{groupId:t})}}]),o}(ct);function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var xt=function(e){ot(o,e);var r=Rt(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showInteractionDetails",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showInteractionDetails",{conversationId:t})}},{key:"proposeInteractionMessage",value:function(t,e){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"proposeInteractionMessage",{mode:t,message:e})}}]),o}(ct);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var St=function(e){ot(o,e);var r=At(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showInteractionDetails",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showMyInteractionDetails",{conversationId:t})}},{key:"showEvaluationDetails",value:function(t,e){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showMyEvaluationDetails",{conversationId:t,evaluationId:e})}}]),o}(ct);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return at(this,n)}}var Nt=function(e){ot(o,e);var r=Ct(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"showExternalContactProfile",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showExternalContactProfile",{contactId:t})}},{key:"showExternalOrganizationProfile",value:function(t){nt(tt(o.prototype),"sendMsgToPc",this).call(this,"showExternalOrganizationProfile",{externalOrganizationId:t})}}]),o}(ct);return function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,e),r(this,"_pcEnv",null),r(this,"_customPcOrigin",null),r(this,"alerting",void 0),r(this,"lifecycle",void 0),r(this,"coreUi",void 0),r(this,"users",void 0),r(this,"directory",void 0),r(this,"conversations",void 0),r(this,"myConversations",void 0),r(this,"externalContacts",void 0),n){var o=h.parse(e._getQueryString()||"");if("gcHostOriginQueryParam"in n||"gcTargetEnvQueryParam"in n){this.assertNonEmptyString(n.gcHostOriginQueryParam,"host origin query param name"),this.assertNonEmptyString(n.gcTargetEnvQueryParam,"target env query param name");var i=o[n.gcHostOriginQueryParam],a=o[n.gcTargetEnvQueryParam];this.assertNonEmptyString(i,"host origin parsed query param"),this.assertNonEmptyString(a,"target env parsed query param"),this._pcEnv=this.lookupGcEnv(i,a)}else if("gcHostOrigin"in n||"gcTargetEnv"in n)this.assertNonEmptyString(n.gcHostOrigin,"gcHostOrigin"),this.assertNonEmptyString(n.gcTargetEnv,"gcTargetEnv"),this._pcEnv=this.lookupGcEnv(n.gcHostOrigin,n.gcTargetEnv);else if("pcEnvironmentQueryParam"in n){var s=n.pcEnvironmentQueryParam;this.assertNonEmptyString(s,"query param name");var c=o[s];this.assertNonEmptyString(c,"value for query param '".concat(s,"'")),this._pcEnv=this.lookupEnv(c)}else"pcEnvironment"in n?(this.assertNonEmptyString(n.pcEnvironment,"pcEnvironment"),this._pcEnv=this.lookupEnv(n.pcEnvironment)):"pcOrigin"in n&&(this.assertNonEmptyString(n.pcOrigin,"pcOrigin"),this._customPcOrigin=n.pcOrigin)}this._pcEnv||this._customPcOrigin||(this._pcEnv=J);var u={targetPcOrigin:this._pcEnv?this._pcEnv.pcAppOrigin:this._customPcOrigin};this.alerting=new dt(u),this.lifecycle=new wt(u),this.coreUi=new Ot(u),this.users=new Pt(u),this.directory=new Dt(u),this.conversations=new xt(u),this.myConversations=new St(u),this.externalContacts=new Nt(u)}return n(e,[{key:"assertNonEmptyString",value:function(t,e){if("string"!=typeof t||0===t.trim().length)throw new Error("Invalid ".concat(e," provided.  Must be a non-null, non-empty string"))}},{key:"lookupEnv",value:function(t,e,n){var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(t&&"string"==typeof t){if("localhost"===t&&r)return{pcEnvTld:"localhost",pcAppOrigin:r};var o=t;if(e&&(0===(o=o.trim()).indexOf(".")&&(o=o.substring(1)),o.indexOf("/")===o.length-1&&(o=o.substring(0,o.length-1))),n.indexOf(o)>=0)return B(o)}return null}(t,!0,e,n);if(!r)throw new Error("Could not parse '".concat(t,"' into a known PureCloud environment"));return r}},{key:"lookupGcEnv",value:function(t,e,n){var r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;if(!Z(e,n))return null;try{var r=new URL(t);return["localhost","127.0.0.1"].includes(r.hostname)?{pcEnvTld:"localhost",pcAppOrigin:r.origin}:K(r,e,n)}catch(t){return null}}(t,e,n);if(!r)throw new Error("Could not parse ".concat(t," (").concat(e,") into a known GenesysCloud environment"));return r}},{key:"pcEnvironment",get:function(){return this.gcEnvironment}},{key:"gcEnvironment",get:function(){return this._pcEnv?this._pcEnv.pcEnvTld:null}}],[{key:"about",value:function(){return"purecloud-client-app-sdk".concat("v","2.6.6")}},{key:"_getQueryString",value:function(){return window&&window.location?window.location.search:null}},{key:"version",get:function(){return"2.6.6"}}]),e}()}));
//# sourceMappingURL=purecloud-client-app-sdk-894e0540.min.js.map
